{% extends 'reservations/base.html' %}

{% block content %}
  {# 管理所が1つだけの場合はユーザーホームへのリンク、それ以外は管理所選択画面へのリンク #}
  {% if single_office %}
    <a href="{% url 'reservations:user_home' %}">ユーザーホームに戻る</a>
  {% else %}
    <a href="{% url 'reservations:select_office' %}">← 管理所選択に戻る</a>
  {% endif %}

  <h2 class="mt-4 mb-3">施設タイプを選択してください</h2>

  {# エラーメッセージがある場合は赤文字で表示 #}
  {% if error %}
    <p style="color:red;">{{ error }}</p>
  {% endif %}

  <form method="post">
    {% csrf_token %}

    {# 施設一覧をループしてラジオボタンを表示 #}
    <div class="mb-4">
      {% for facility in facilities %}
        <div class="form-check d-flex align-items-center mb-2">
          {# ラジオボタン本体。選択済みなら checked を付与 #}
          <input class="form-check-input me-2" type="radio" id="facility{{ facility.id }}" name="facility_id" value="{{ facility.id }}"
          {% if facility.id == selected_facility %}checked{% endif %}>

          {# ラジオボタンのラベル。施設名を表示 #}
          <label class="form-check-label" for="facility{{ facility.id }}">{{ facility.name }}</label>
        </div>
      {% endfor %}
    </div>

    {# 送信ボタン #}
    <button type="submit" class="btn btn-primary">次へ</button>
  </form>
{% endblock %}